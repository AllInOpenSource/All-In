(function(){var GitHubAnalytics,arrayEquals,log,queued_function_calls,warn,hasProp={}.hasOwnProperty;log=function(args){if(console&&console["log"]){return console.log(args)}};warn=function(args){if(console&&console["warn"]){return console.warn(args)}};arrayEquals=function(a,b){var i,j,ref;if(a.length!==b.length){return false}for(i=j=0,ref=a.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(a[i]!==b[i]){return false}}return true};GitHubAnalytics={host:"collector.githubapp.com",type:"page_view",dimensions:{},measures:{},context:{},actor:{},image:new Image,performance:{},expectedPerformanceTimingKeys:["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],recordPageView:function(){this.applyMetaTags();if(this.app==null){warn("App not set, you are doing something wrong");return false}if(this.host==null){warn("Host not set, you are doing something wrong");return false}this.image.src=this._src();this._clearPerformance();return true},setHost:function(host){return this.host=host},setApp:function(app){return this.app=app},setDimensions:function(dimensions){return this.dimensions=dimensions},addDimensions:function(dimensions){var k,results,v;if(this.dimensions==null){this.dimensions={}}results=[];for(k in dimensions){if(!hasProp.call(dimensions,k))continue;v=dimensions[k];results.push(this.dimensions[k]=v)}return results},setMeasures:function(measures){return this.measures=measures},setMeasures:function(measures){return this.measures=measures},addMeasures:function(measures){var k,results,v;if(this.measures==null){this.measures={}}results=[];for(k in measures){if(!hasProp.call(measures,k))continue;v=measures[k];results.push(this.measures[k]=v)}return results},setContext:function(context){return this.context=context},addContext:function(context){var k,results,v;if(this.context==null){this.context={}}results=[];for(k in context){if(!hasProp.call(context,k))continue;v=context[k];results.push(this.context[k]=v)}return results},setActor:function(actor){return this.actor=actor},push:function(array){return this.applyCall(array)},enablePerformance:function(){return this.performance=this._performanceTiming()},_recordSrc:function(type,dimensions,measures,context){return"//"+this.host+"/"+this.app+"/"+type+"?"+this._queryString(dimensions,measures,context)},_src:function(){return"//"+this.host+"/"+this.app+"/"+this.type+"?"+this._queryString()},_queryString:function(dimensions,measures,context){var key,param_pieces,value;param_pieces=function(){var ref,results;ref=this._params();results=[];for(key in ref){value=ref[key];results.push(`dimensions[${key}]=${value}`)}return results}.call(this);param_pieces.push(this._encodeObject("dimensions",this._merge(this.dimensions,dimensions)));param_pieces.push(this._encodeObject("measures",this._merge(this.measures,measures)));if(this.performance!=null){param_pieces.push(this._encodeObject("measures",{performance_timing:this.performance}))}param_pieces.push(this._encodeObject("context",this._merge(this.context,context)));param_pieces.push(this._actor());param_pieces.push(this._encodeObject("dimensions",{cid:this._clientId()}));return param_pieces.join("&")},_clearPerformance:function(){return this.performance=null},_performanceTiming:function(){var epoch,j,key,len,measure,measures,ref,ref1,ref2,ref3,timing,value,version;if(((ref=window.performance)!=null?(ref1=ref.timing)!=null?ref1.navigationStart:void 0:void 0)==null){return null}timing={};ref2=this.expectedPerformanceTimingKeys;for(j=0,len=ref2.length;j<len;j++){key=ref2[j];timing[key]=(ref3=window.performance.timing[key])!=null?ref3:0}version=1;measures=[];epoch=timing["navigationStart"];for(key in timing){value=timing[key];measure=value===0?null:value-epoch;measures.push(measure)}return version+"-"+measures.join("-")},_params:function(){return{page:this._encode(this._page()),title:this._encode(this._title()),referrer:this._encode(this._referrer()),user_agent:this._encode(this._agent()),screen_resolution:this._encode(this._screenResolution()),pixel_ratio:this._encode(this._pixelRatio()),browser_resolution:this._encode(this._browserResolution()),tz_seconds:this._encode(this._tzSeconds()),timestamp:(new Date).getTime()}},_page:function(){var e;try{return document.location.href}catch(error){e=error;return""}},_title:function(){var e;try{return document.title}catch(error){e=error;return""}},_referrer:function(){var e,referrer;referrer="";try{referrer=window.top.document.referrer}catch(error){e=error;if(window.parent){try{referrer=window.parent.document.referrer}catch(error){e=error}}}if(referrer===""){referrer=document.referrer}return referrer},_agent:function(){var e;try{return navigator.userAgent}catch(error){e=error;return""}},_screenResolution:function(){var e;try{return screen.width+"x"+screen.height}catch(error){e=error;return"unknown"}},_pixelRatio:function(){return window.devicePixelRatio},_browserResolution:function(){var e,height,ref,ref1,width;try{width=0;height=0;if(typeof window.innerWidth==="number"){width=window.innerWidth;height=window.innerHeight}else if(((ref=document.documentElement)!=null?ref.clientWidth:void 0)!=null){width=document.documentElement.clientWidth;height=document.documentElement.clientHeight}else if(((ref1=document.body)!=null?ref1.clientWidth:void 0)!=null){width=document.body.clientWidth;height=document.body.clientHeight}return width+"x"+height}catch(error){e=error;return"unknown"}},_tzSeconds:function(){var e;try{return(new Date).getTimezoneOffset()*-60}catch(error){e=error;return""}},_merge:function(...objects){var j,key,len,merged,object,value;merged={};for(j=0,len=objects.length;j<len;j++){object=objects[j];for(key in object){value=object[key];merged[key]=value}}return merged},_encodeObject:function(key,object){var item,j,len,pieces,subkey;pieces=[];if(Array.isArray!=null&&Array.isArray(object)||Object.prototype.toString.call(object)==="[object Array]"){for(j=0,len=object.length;j<len;j++){item=object[j];pieces.push(this._encodeObject(`${key}[]`,item))}}else if(object===Object(object)){for(subkey in object){pieces.push(this._encodeObject(`${key}[${subkey}]`,object[subkey]))}}else{pieces.push(`${key}=${this._encode(object)}`)}return pieces.join("&")},_actor:function(){var actor_key,actor_pieces,item,j,key,len,ref,value;actor_pieces=[];ref=this.actor;for(key in ref){value=ref[key];actor_key=`dimensions[actor_${key}]`;if(value["join"]){for(j=0,len=value.length;j<len;j++){item=value[j];actor_pieces.push(`${actor_key}[]=${this._encode(item)}`)}}else{actor_pieces.push(`${actor_key}=${this._encode(value)}`)}}return actor_pieces.join("&")},_getCookie:function(name){var cookieString,j,key,len,ref,rv,split,value;rv=[];ref=document.cookie.split(";");for(j=0,len=ref.length;j<len;j++){cookieString=ref[j];split=cookieString.trim().split("=");if(split.length<2){continue}key=split[0];value=split[1];if(key===name){rv.push({key:key,value:value})}}return rv},_clientId:function(){var clientId;clientId=this._getClientId();if(clientId===""){clientId=this._setClientId()}return clientId},_getClientId:function(){var clientId,clientIds,cookie,cookies,first,j,len,splitOut,version;cookies=this._getCookie("_octo");clientIds=[];for(j=0,len=cookies.length;j<len;j++){cookie=cookies[j];splitOut=cookie.value.split(".");first=splitOut.shift();if(first==="GH1"&&splitOut.length>1){version=splitOut.shift().split("-");if(version.length===1){version[1]="1"}version[0]*=1;version[1]*=1;clientId=splitOut.join(".");clientIds.push([version,clientId])}}clientId="";if(clientIds.length>0){clientId=clientIds.sort().reverse()[0][1]}return clientId},_setClientId:function(){var clientId,cookie,domain,expiration,time;time=(new Date).getTime();clientId=Math.round(Math.random()*(Math.pow(2,31)-1))+"."+Math.round(time/1e3);cookie="GH1.1."+clientId;expiration=new Date(time+2*365*86400*1e3).toGMTString();domain="."+document.domain.split(".").reverse().slice(0,2).reverse().join(".");document.cookie="_octo="+cookie+"; expires="+expiration+"; path=/; domain="+domain;return clientId},_encode:function(string){if(string!=null){return window.encodeURIComponent(string)}else{return""}},applyQueuedCalls:function(calls){var call,j,len,results;results=[];for(j=0,len=calls.length;j<len;j++){call=calls[j];results.push(this.applyCall(call))}return results},applyCall:function(array){var args,name;name=array[0];args=array.slice(1);if(this[name]){return this[name].apply(this,args)}else{return warn(`${name} is not a valid method`)}},applyMetaTags:function(){var data;data=this.loadMetaTags();if(data.host){this.setHost(data.host)}if(data.app){this.setApp(data.app)}if(!this._objectIsEmpty(data.actor)){this.setActor(data.actor)}this.addDimensions(data.dimensions);this.addMeasures(data.measures);return this.addContext(data.context)},loadMetaTags:function(){var j,len,meta,nameParts,ref,result;result={dimensions:{},measures:{},context:{},actor:{}};ref=document.getElementsByTagName("meta");for(j=0,len=ref.length;j<len;j++){meta=ref[j];if(meta.name&&meta.content){if(nameParts=meta.name.match(this.octolyticsMetaTagName)){switch(nameParts[1]){case"host":result.host=meta.content;break;case"app-id":result.app=meta.content;break;case"app":result.app=meta.content;break;case"dimension":this._addField(result.dimensions,nameParts[2],meta);break;case"measure":this._addField(result.measures,nameParts[2],meta);break;case"context":this._addField(result.context,nameParts[2],meta);break;case"actor":this._addField(result.actor,nameParts[2],meta)}}}}return result},_addField:function(target,fieldName,metaTag){if(metaTag.attributes["data-array"]){if(target[fieldName]==null){target[fieldName]=[]}return target[fieldName].push(metaTag.content)}else{return target[fieldName]=metaTag.content}},_objectIsEmpty:function(obj){var k,v;for(k in obj){if(!hasProp.call(obj,k))continue;v=obj[k];return false}return true},octolyticsMetaTagName:/^octolytics-(host|app-id|app|dimension|measure|context|actor)-?(.*)/};if(window["_octo"]){if(window._octo["slice"]){queued_function_calls=window._octo.slice(0);window._octo=GitHubAnalytics;window._octo.applyQueuedCalls(queued_function_calls)}}else{window._octo=GitHubAnalytics}}).call(this);
